import{J as e,r as t,p as n,n as r,i as o,X as i}from"../shared.min.js";function f({createElement:f,createTextNode:l,isTextNode:s,replaceText:u,insertNode:c,removeNode:a,setProperty:p,getParentNode:g,getFirstChild:d,getNextSibling:y}){function h(e,t,r,o){if(void 0===r||o||(o=[]),"function"!=typeof t)return m(e,t,o,r);n((n=>m(e,t(),n,r)),o)}function m(e,t,r,o,i){for(;"function"==typeof r;)r=r();if(t===r)return r;const f=typeof t,a=void 0!==o;if("string"===f||"number"===f)if("number"===f&&(t=t.toString()),a){let n=r[0];n&&s(n)?u(n,t):n=l(t),r=x(e,r,o,n)}else""!==r&&"string"==typeof r?u(d(e),r=t):(x(e,r,o,l(t)),r=t);else if(null==t||"boolean"===f)r=x(e,r,o);else{if("function"===f)return n((()=>{let n=t();for(;"function"==typeof n;)n=n();r=m(e,n,r,o)})),()=>r;if(Array.isArray(t)){const f=[];if(A(f,t,i))return n((()=>r=m(e,f,r,o,!0))),()=>r;if(0===f.length){const t=x(e,r,o);if(a)return r=t}else Array.isArray(r)?0===r.length?b(e,f,o):N(e,r,f):null==r||""===r?b(e,f):N(e,a&&r||[d(e)],f);r=f}else{if(Array.isArray(r)){if(a)return r=x(e,r,o,t);x(e,r,null,t)}else null!=r&&""!==r&&d(e)?v(e,t,d(e)):c(e,t);r=t}}return r}function A(e,t,n){let r=!1;for(let o=0,i=t.length;o<i;o++){let i,f=t[o];if(null==f||!0===f||!1===f);else if(Array.isArray(f))r=A(e,f)||r;else if("string"==(i=typeof f)||"number"===i)e.push(l(f));else if("function"===i)if(n){for(;"function"==typeof f;)f=f();r=A(e,Array.isArray(f)?f:[f])||r}else e.push(f),r=!0;else e.push(f)}return r}function N(e,t,n){let r=n.length,o=t.length,i=r,f=0,l=0,s=y(t[o-1]),u=null;for(;f<o||l<i;)if(t[f]!==n[l]){for(;t[o-1]===n[i-1];)o--,i--;if(o===f){const t=i<r?l?y(n[l-1]):n[i-l]:s;for(;l<i;)c(e,n[l++],t)}else if(i===l)for(;f<o;)u&&u.has(t[f])||a(e,t[f]),f++;else if(t[f]===n[i-1]&&n[l]===t[o-1]){const r=y(t[--o]);c(e,n[l++],y(t[f++])),c(e,n[--i],r),t[o]=n[i]}else{if(!u){u=new Map;let e=l;for(;e<i;)u.set(n[e],e++)}const r=u.get(t[f]);if(null!=r)if(l<r&&r<i){let s,a=f,p=1;for(;++a<o&&a<i&&null!=(s=u.get(t[a]))&&s===r+p;)p++;if(p>r-l){const o=t[f];for(;l<r;)c(e,n[l++],o)}else v(e,n[l++],t[f++])}else f++;else a(e,t[f++])}}else f++,l++}function x(e,t,n,r){if(void 0===n){let t;for(;t=d(e);)a(e,t);return r&&c(e,r),""}const o=r||l("");if(t.length){let r=!1;for(let i=t.length-1;i>=0;i--){const f=t[i];if(o!==f){const t=g(f)===e;r||i?t&&a(e,f):t?v(e,o,f):c(e,o,n)}else r=!0}}else c(e,o,n);return[o]}function b(e,t,n){for(let r=0,o=t.length;r<o;r++)c(e,t[r],n)}function v(e,t,n){c(e,t,n),a(e,n)}function P(e,t,r={},o){return t||(t={}),o||n((()=>r.children=m(e,t.children,r.children))),n((()=>t.ref&&t.ref(e))),n((()=>{for(const n in t){if("children"===n||"ref"===n)continue;const o=t[n];o!==r[n]&&(p(e,n,o,r[n]),r[n]=o)}})),r}return{render(e,n){let r;return t((t=>{r=t,h(n,e())})),r},insert:h,spread(e,t,r){"function"==typeof t?n((n=>P(e,t(),n,r))):P(e,t,void 0,r)},createElement:f,createTextNode:l,insertNode:c,setProp:(e,t,n,r)=>(p(e,t,n,r),n),mergeProps:e,effect:n,memo:r,createComponent:o,use:(e,t,n)=>i((()=>e(t,n)))}}function l(t){const n=f(t);return n.mergeProps=e,n}export{l as createRenderer};
